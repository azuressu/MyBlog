![header](https://capsule-render.vercel.app/api?type=waving&color=auto&height=200&section=header&text=ë¸”ë¡œê·¸ë°±ì—”ë“œì„œë²„&fontSize=50)

## ğŸ“ ë¸”ë¡œê·¸ ë°±ì—”ë“œ ì„œë²„ ë§Œë“¤ê¸°
âœï¸ ê°œì¸ê³¼ì œ âœï¸


## ğŸ“ í”„ë¡œê·¸ë¨ ìš”êµ¬ì‚¬í•­
1. ì „ì²´ ê²Œì‹œê¸€ ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” API
  - ì œëª©, ì‘ì„±ìëª…, ì‘ì„± ë‚´ìš©, ì‘ì„± ë‚ ì§œ ì¡°íšŒ
  - ì‘ì„± ë‚ ì§œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬
2. ê²Œì‹œê¸€ì„ ì‘ì„±í•˜ëŠ” API
  - ì œëª©, ì‘ì„±ìëª…, ë¹„ë°€ë²ˆí˜¸, ì‘ì„± ë‚´ìš© ì €ì¥
  - ì €ì¥ëœ ê²Œì‹œê¸€ì„ Clientë¡œ ë°˜í™˜
3. ì„ íƒí•œ ê²Œì‹œê¸€ì„ ì¡°íšŒí•˜ëŠ” API
  - ì„ íƒí•œ ê²Œì‹œê¸€ì˜ ì œëª©, ì‘ì„±ìëª…, ì‘ì„± ë‚ ì§œ, ì‘ì„± ë‚´ìš© ì¡°íšŒ
  - ê²€ìƒ‰ ê¸°ëŠ¥ì´ ì•„ë‹Œ, ê°„ë‹¨í•œ ê²Œì‹œê¸€ ì¡°íšŒë¡œ êµ¬í˜„
4. ì„ íƒí•œ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•˜ëŠ” API
  - ìˆ˜ì • ìš”ì²­ ì‹œ, ìˆ˜ì •í•  ë°ì´í„°ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê°™ì´ ë³´ë‚´ ì„œë²„ì—ì„œ ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜ ì—¬ë¶€ë¥¼ í™•ì¸
  - ì œëª©, ì‘ì„±ìëª…, ì‘ì„± ë‚´ìš©ì„ ìˆ˜ì •í•˜ê³  ìˆ˜ì •ëœ ê²Œì‹œê¸€ì„ Clientë¡œ ë°˜í™˜
5. ì„ íƒí•œ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ëŠ” API
  - ì‚­ì œ ìš”ì²­ ì‹œ, ë¹„ë°€ë²ˆí˜¸ë¥¼ ê°™ì´ ë³´ë‚´ ì„œë²„ì—ì„œ ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜ ì—¬ë¶€ë¥¼ í™•ì¸
  - ì„ íƒí•œ ê²Œì‹œê¸€ì„ ì‘ì„¸í•˜ê³  Clientë¡œ ì„±ê³µí–ˆë‹¤ëŠ” í‘œì‹œ ë°˜í™˜
  - 
### â— í”„ë¡œê·¸ë¨ ì„¤ê³„ ì‹œ ì£¼ì˜ì‚¬í•­
1. Entityë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, DTOì— ë‹´ì•„ì„œ ë°˜í™˜í•˜ê¸°
2. JSONì„ ë°˜í™˜í•˜ëŠ” API í˜•íƒœë¡œ ì§„í–‰í•˜ê¸°
3. ì„œë²„ê°€ ë°˜í™˜í•˜ëŠ” ê²°ê³¼ê°’ì„ Postmanìœ¼ë¡œ í™•ì¸í•˜ê¸°

## ì‚¬ìš©í•œ Tool
<img src="https://img.shields.io/badge/git-F05032?style=flat&logo=git&logoColor=white"/>
<img src="https://img.shields.io/badge/github-181717?style=flat&logo=github&logoColor=white"/>
<img src="https://img.shields.io/badge/java-007396?style=flat&logo=java&logoColor=white"/>
<img src="https://img.shields.io/badge/intellijidea-000000?style=flat&logo=intellijidea&logoColor=white"/>


## ğŸª¶ API ëª…ì„¸ì„œ
<p align="center">
  <img src="https://github.com/azuressu/MyBlog/assets/74248726/4f754778-50b0-4e4b-a76f-a9ea1a1a9d0e">
</p>
<p align="center">
  <img src="https://github.com/azuressu/MyBlog/assets/74248726/1f0ffc67-40f5-47bc-b0f1-d1ff1e1c82f8">
</p>


## ğŸ“œ í…Œì´ë¸” êµ¬ì„±
<p align="center">
  <img src="https://github.com/azuressu/MyBlog/assets/74248726/7207f44b-7eb6-4cb8-b82f-6eda9dc8987d">
</p>


## ğŸ› Use Case ë‹¤ì´ì–´ê·¸ë¨
(ì •ë‹µì€ ì•„ë‹Œ ê²ƒ ê°™ì§€ë§Œ ê·¸ë ¤ë³´ì•˜ë‹¤)
<p align="center">
  <img src="https://github.com/azuressu/MyBlog/assets/74248726/e3050766-1576-4548-a0c5-555ccac57ef9">
</p>


## ğŸ—‚ï¸ íŒŒì¼ êµ¬ì„±
1. controller íŒ¨í‚¤ì§€ â€“ PostController.java
2. dto íŒ¨í‚¤ì§€ â€“ PostRequestDto.java, PostResponseDto.java
3. entity íŒ¨í‚¤ì§€ â€“ Post.java, Timestapmed.java
4. repository íŒ¨í‚¤ì§€ â€“ PostRepository,java
5. service íŒ¨í‚¤ì§€ â€“ PostService.java


## ğŸª„ ì½”ë“œ êµ¬ì„±
1. PostController.java
```java
@RestController
@RequestMapping("/api")
public class PostController {
  private final PostService postService;
  public PostController(PostService postService) {
    this.postService = postService;
  }

  // ê²Œì‹œê¸€ ë“±ë¡
  @PostMapping("/posts")
  public PostResponseDto createPost(@RequestBody PostRequestDto requestDto) {
    return postService.createPost(requestDto);
  }
  // ì „ì²´ ê²Œì‹œê¸€ ì¡°íšŒ
  @GetMapping("/posts")
  public List<PostResponseDto> getPosts() {
    return postService.getPosts();
  }
  // ì„ íƒ ê²Œì‹œê¸€ ì¡°íšŒ
  @GetMapping("/posts/{id}")
  public PostResponseDto getOnePost(@PathVariable Long id) {
    return postService.getOnePost(id);
  }
  // ê²Œì‹œê¸€ ìˆ˜ì •
  @PutMapping("/posts/{id}")
  public PostResponseDto updatePost(@PathVariable Long id, @RequestBody PostRequestDto requestDto) {
    return postService.updatePost(id, requestDto);
  }
  // ê²Œì‹œê¸€ ì‚­ì œ
  @DeleteMapping("/posts/{id}")
  public String deletePost(@PathVariable Long id, @RequestParam String password) {
    return postService.deletePost(id, password);
  }
}
```
ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í• ì„ í•˜ëŠ” í´ë˜ìŠ¤ì´ë‹¤.
ê¸°ëŠ¥ë³„ë¡œ urlê³¼ ë©”ì†Œë“œë¥¼ ë§¤í•‘í•˜ì—¬ ë©”ì†Œë“œë¥¼ ì‘ì„±í–ˆë‹¤.

2. PostRequestDto.java
```java
@Getter
public class PostRequestDto {
  private String title;     // ê²Œì‹œê¸€ ì œëª©
  private String username;  // ì‘ì„±ì ì´ë¦„
  private String contents;  // ê²Œì‹œê¸€ ë‚´ìš©
  private String password;  // ë¹„ë°€ë²ˆí˜¸
}
```
ì‚¬ìš©ìë¡œë¶€í„° ì…ë ¥ë°›ì„ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ Dto í´ë˜ìŠ¤ì´ë‹¤.
ê²Œì‹œê¸€ì˜ ì œëª©, ì‘ì„±ì ì´ë¦„, ê²Œì‹œê¸€ ë‚´ìš©, ë¹„ë°€ë²ˆí˜¸ í•„ë“œë¥¼ privateìœ¼ë¡œ ì„ ì–¸í•˜ê³ , ê·¸ì— ì ‘ê·¼ ê°€ëŠ¥í•œ Getterë¥¼ ë§Œë“¤ì—ˆë‹¤.

3. PostResponseDto.java
```java
@Getter
public class PostResponseDto {
  private Long id;                  // id
  private String username;          // ì‘ì„±ì ì´ë¦„
  private String contents;          // ê²Œì‹œê¸€ ë‚´ìš©
  private String title;             // ê²Œì‹œê¸€ ì œëª©
  private LocalDateTime createTime; // ì‘ì„±ì¼
  private LocalDateTime modifyTime; // ìˆ˜ì •ì¼
  
  public PostResponseDto(Post post) {
    this.id = post.getId();
    this.title = post.getTitle();
    this.username = post.getUsername();
    this.contents = post.getContents();
    this.createTime = post.getCreateTime();
    this.modifyTime = post.getModifyTime();
    }
}
```
ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ Dtoí´ë˜ìŠ¤ì´ë‹¤.
idì™€ ê²Œì‹œê¸€ ì œëª©, ì‘ì„±ì ì´ë¦„, ê²Œì‹œê¸€ ë‚´ìš©, ê²Œì‹œê¸€ ì‘ì„±ì¼, ê²Œì‹œê¸€ ìˆ˜ì •ì¼ í•„ë“œë¥¼ privateìœ¼ë¡œ ì„ ì–¸í•˜ê³ , ê·¸ì— ì ‘ê·¼ ê°€ëŠ¥í•œ Getter ë©”ì†Œë“œë¥¼ ë§Œë“¤ì—ˆë‹¤.

4. Post.java
```java
@Entity
@Getter
@Setter
@Table(name = "post")
@NoArgsConstructor
public class Post extends Timestamped{

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)   // auto_increase
    private Long id;
    @Column(name = "title", nullable = false)
    private String title;
    @Column(name = "contents", nullable = false)
    private String contents;
    @Column(name = "username", nullable = false)
    private String username;
    @Column(name = "password", nullable = false)
    private String password;

    public Post(PostRequestDto requestDto) {
        this.title = requestDto.getTitle();
        this.username = requestDto.getUsername();
        this.contents = requestDto.getContents();
        this.password = requestDto.getPassword();
    }

    public void update(PostRequestDto requestDto) {
        // ì œëª©, ì‘ì„±ìëª…, ì‘ì„± ë‚´ìš©ì„ ìˆ˜ì •
        this.title = requestDto.getTitle();
        this.username = requestDto.getUsername();
        this.contents = requestDto.getContents();
    }
}
```
í…Œì´ë¸”ì— ë„£ì–´ì¤„ ì—”í‹°í‹° Post í´ë˜ìŠ¤ì´ë‹¤. (Timestamped ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ”ë‹¤)
PKë¡œ ì‚¬ìš©ë  idì™€, ê²Œì‹œê¸€ ì œëª©, ê²Œì‹œê¸€ ë‚´ìš©, ì‘ì„±ìëª…, ë¹„ë°€ë²ˆí˜¸ë¥¼ í•„ë“œë¥¼ privateìœ¼ë¡œ ì„ ì–¸í•˜ê³ , ê° í•„ë“œì— ì ‘ê·¼ ê°€ëŠ¥í•œ Getterì™€ ì„¤ì • ê°€ëŠ¥í•œ Setter ë©”ì†Œë“œë¥¼ ë§Œë“¤ì—ˆë‹¤.
ê¸°ë³¸ìƒì„±ìì™€ íŒŒë¼ë¯¸í„° ê°’ì„ ë°›ëŠ” ìƒì„±ìë¥¼ ë§Œë“¤ê³ , ê²Œì‹œê¸€ ìˆ˜ì •ì„ ìœ„í•œ ë©”ì†Œë“œë„ í•˜ë‚˜ ë§Œë“¤ì—ˆë‹¤. 

5. Timestamped.java
```java
@Getter
@MappedSuperclass
@EntityListeners(AuditingEntityListener.class)
public abstract class Timestamped {

    @CreatedDate
    @Column(updatable = false)        // ì´í›„ì—ëŠ” ê°’ì´ ìˆ˜ì •ë˜ì§€ ì•ŠìŒ
    @Temporal(TemporalType.TIMESTAMP)
    private LocalDateTime createTime;

    @LastModifiedDate
    @Column
    @Temporal(TemporalType.TIMESTAMP)
    private LocalDateTime modifyTime;

}
```
ì‘ì„±ì¼ê³¼ ìˆ˜ì •ì¼ ì‹œê°„ ë°ì´í„°ë¥¼ ì €ì¥í•  ì¶”ìƒ í´ë˜ìŠ¤ì´ë‹¤.
LocalDateTime í˜•íƒœì˜ ì‘ì„±ì¼ê³¼ ìˆ˜ì •ì¼ í•„ë“œë¥¼ ë§Œë“¤ê³  ì ‘ê·¼ ê°€ëŠ¥í•œ Getter ë©”ì†Œë“œë¥¼ ë§Œë“¤ì—ˆë‹¤.

6. PostRepository.java
```java
public interface PostRepository extends JpaRepository<Post, Long> {
    List<Post> findAllByOrderByCreateTimeDesc();
}
```
Repository ì—­í• ì˜ PostRepository ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.
JpaRepositoryë¥¼ ìƒì†ë°›ìœ¼ë©° Post íƒ€ì…ê³¼ Long íƒ€ì…ì„ ê°–ê³ , ê²Œì‹œê¸€ë“¤ì„ ì‹œê°„ì— ë”°ë¼ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬í•˜ì—¬ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ë©”ì†Œë“œë¥¼ ë§Œë“¤ì—ˆë‹¤.

7. PostService.java
```java
@Service
public class PostService {

    @Autowired
    private final PostRepository postRepository;

    @Autowired
    public PostService(PostRepository postRepository) {
        this.postRepository = postRepository;
    }

    public PostResponseDto createPost(PostRequestDto requestDto) {
        Post post = new Post(requestDto);
        // DBì— ì €ì¥
        Post savePost = postRepository.save(post);
        PostResponseDto postResponseDto = new PostResponseDto(savePost);
        return postResponseDto;
    }

    public List<PostResponseDto> getPosts() {
        return postRepository.findAllByOrderByCreateTimeDesc().stream().map(PostResponseDto::new).toList();
    }

    public PostResponseDto getOnePost(Long id) {
        Post post = findPost(id);
        PostResponseDto postResponseDto = new PostResponseDto(post);
        return postResponseDto;
    }

    @Transactional
    public PostResponseDto updatePost(Long id, PostRequestDto requestDto) {
        Post post = findPost(id);

        // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í›„
        if (post.getPassword().equals(requestDto.getPassword())) {
            post.update(requestDto);
            PostResponseDto postResponseDto = new PostResponseDto(post);
            return postResponseDto;
        } else {
            return null;
        }
    }

    // RequestBody ë°©ì‹
    public String deletePost(Long id, PostRequestDto requestDto) {
        Post post = findPost(id);

        // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í›„
        if (post.getPassword().equals(requestDto.getPassword())) {
            postRepository.delete(post);
            return "{\"success\":\"true\"}";
        } else {
            return "{\"success\":\"false\"}";
        }
    }

    // í•´ë‹¹ í¬ìŠ¤íŠ¸ë¥¼ ì°¾ì•„ì„œ ë°˜í™˜
    private Post findPost(Long id) {
        return postRepository.findById(id).orElseThrow(() ->
                new IllegalArgumentException("ì„ íƒí•œ ê²Œì‹œê¸€ì€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."));
    }

}
```
Service ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤ì´ë‹¤.
Repository í•„ë“œë¥¼ ì„ ì–¸í•˜ê³  ìƒì„±ìì— ë„£ì–´ì¤€ë‹¤.
ê²Œì‹œê¸€ ì‘ì„±, ì „ì²´ ê²Œì‹œê¸€ ì¡°íšŒ, ì„ íƒ ê²Œì‹œê¸€ ì¡°íšŒ, ê²Œì‹œê¸€ ìˆ˜ì •, ê²Œì‹œê¸€ ì‚­ì œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œë“¤ì„ ë§Œë“¤ê³ , idë¥¼ ì…ë ¥ë°›ì•˜ì„ ë•Œ, í•´ë‹¹ ê²Œì‹œê¸€ì„ ì°¾ì•„ì„œ ë°˜í™˜í•´ì£¼ëŠ” ë©”ì†Œë“œë¥¼ ë§Œë“¤ì—ˆë‹¤.

![Footer](https://capsule-render.vercel.app/api?type=waving&color=auto&height=200&section=footer)
